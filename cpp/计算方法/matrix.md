# matrix.h说明文档

[toc]

## 0.简要说明

这个模块是我用来处理矩阵的。。。因为想跟随的老师哪怕是STL库都不能使用，而C++原生提供的数组类型连数组的size都无法获取，这让我很苦恼。用惯了numpy的便捷，于是打算自己写一个用以科学计算的二维矩阵类型

之前想过要不要再写一个特殊的一维array类，后来仔细想了想，感觉这样重载的东西有点太多了，工作量比较大。而且matrix一个维度等于1就变成了array，于是我暂且不考虑array类。如果确实需要，或许我后面会加上





## 1.matrix类成员变量

1. m：矩阵行数，int类型
2. n：矩阵列数，int类型
3. p：指针，用于指向存储matrix变量的double类型指针

注意，上述均为public变量





## 2.matrix类成员函数

### 2.1.double**zeros2(int m,int n,double value=0.)分配二维内存函数

这个函数是唯一的private私有成员函数，用来对p指针分配内存

输入值为m，n和可选的value，返回的是一个指向m\*n数组的指针，且这个数组里的所有值为value，value默认为0

### 2.2.matrix(int m=1,int n=1,double value=0.)构造函数

为构造函数，构造一个m\*n的值全为value的matrix类型，默认情况下构造的是1\*1的0矩阵

### 2.3.matrix(const matrix &mat)拷贝构造函数

为拷贝构造函数，把mat这个matrix的全部信息拷贝给当前的matrix类

### 2.4.~matrix()析构函数

释放指针p的内存

### 2.5.+-*/重载四则运算符

这里比较难以解释，大概就是支持matrix间的加减乘除，和matrix与double数字的加减乘除，大概分为如下情况：

- 同样m,n的两个matrix相四则运算
- 一位数列加矩阵，为各行、各列相四则运算
- 数字与矩阵相四则运算，左右运算都可

如果维度对不上会在控制台抛出错误;返回值为运算完的矩阵类型matrix

ex：
```C++
matrix mat(3,3,300);
(3*mat).show();
```

输出结果:
```bash
900    900    900 
900    900    900 
900    900    900 
```

另外也对==和!=进行了重载，返回值为bool类型的值

```C++
std::cout<<mat==mat<<std::endl;
```

输出结果：
```bash
1
```

### 2.6.matrix Transpose()转置函数

返回当前矩阵的转置矩阵，为一个n\*m的矩阵

ex:

```C++
matrix mat(3,3,900);
mat.add(3); //列add 3
mat.add(1,'r'); //行add 1
mat.show();
(mat.Transpose()).show();
```

输出结果
```bash
900    900    900      1 
900    900    900      1 
900    900    900      1 
3      3      3      1 

900    900    900      3 
900    900    900      3 
900    900    900      3 
1      1      1      1 
```

### 2.7.void show()函数

将当前的矩阵打印在控制台上，前后空开一行，间隔为6字符

### 2.7.matrix dot(matrix mat2)点积函数

将当前的matrix乘以mat2，返回一个matrix结果；如果维度对不上将抛出错误

ex:

```C++
(mat.dot(mat)).show();
```

输出结果:
```bash
2.43e+06 2.43e+06 2.43e+06   2701 
2.43e+06 2.43e+06 2.43e+06   2701 
2.43e+06 2.43e+06 2.43e+06   2701 
  8103   8103   8103     10 
```

### 2.8.bool isSquare()判断方阵函数

判断当前矩阵是否为方阵，返回布尔值

ex:

```C++
std::cout<<mat.isSquare()<<std::endl;
```

输出结果:
```bash
1
```

### 2.9.matrix reshape(int m1,int n1)重塑函数

将m\*n的矩阵重塑为m1\*n1的矩阵，并将结果作为matrix返回，如果出现维度对不上会抛出错误

ex:

```C++
(mat.reshape(2,8)).show();
```

输出结果:
```bash
900    900    900      1    900    900    900      1 
900    900    900      1      3      3      3      1 
```

### 2.10.int add(double u,char layout) / int add(matrix mat2,char layout)增加函数

在原矩阵基础上增加项，增加项可谓double或者matrix类,运行正常时返回0

layout负责处理‘在列上增加’，‘在行上增加

- 在列上增加为，layout设为'c'，意为column
- 在行上增加为，layout设为'r'，意为row
- layout默认值为'c'

如果增加的matrix类维度不对，会报错；增加double类会将一行、一列全设为该值

ex:

```C++
matrix mat(3,3,900);
mat.add(3); //列add 3
mat.add(1,'r'); //行add 1
mat.show();
mat.add(mat,'r');
mat.show();
```

输出结果：
```bash
   900    900    900      1 
   900    900    900      1 
     3      3      3      1 

   900    900    900      1    900    900    900      1 
   900    900    900      1    900    900    900      1 
   900    900    900      1    900    900    900      1 
     3      3      3      1      3      3      3      1 
```





## 3.与其有关的函数

### 3.1.matrix eye(int n)单位构造矩阵

构造n维单位矩阵，返回matrix

ex:

```C++
eye(3).show();
```

输出结果：
```bash
     1      0      0 
     0      1      0 
     0      0      1 
```

### 3.2.matrix square(int n,double value=0.)方阵构造函数

用来生成一个全为value的n维方阵，返回该matrix

ex:
```C++
square(3,3,900).show();
```

输出结果:
```bash
   900    900    900 
   900    900    900 
   900    900    900 
```

### 3.3.matrix linspace(double beg,double en,double d,char layout='c')向量构造函数

构造以beg为起点，en为终点，d为步长的一维数组，并且默认是列向量；否则需要改layout='r'返回行向量；返回值为该matrix类

ex:
```C++
linspace(0,10,0.1,'r')show();
```

输出结果：
```bash
     0    0.1    0.2    0.3    0.4    0.5    0.6    0.7    0.8    0.9      1    1.1    1.2    1.3    1.4    1.5    1.6    1.7    1.8    1.9      2    2.1    2.2    2.3    2.4    2.5    2.6    2.7    2.8    2.9      3    3.1    3.2    3.3    3.4    3.5    3.6    3.7    3.8    3.9      4    4.1    4.2    4.3    4.4    4.5    4.6    4.7    4.8    4.9      5    5.1    5.2    5.3    5.4    5.5    5.6    5.7    5.8    5.9      6    6.1    6.2    6.3    6.4    6.5    6.6    6.7    6.8    6.9      7    7.1    7.2    7.3    7.4    7.5    7.6    7.7    7.8    7.9      8    8.1    8.2    8.3    8.4    8.5    8.6    8.7    8.8    8.9      9    9.1    9.2    9.3    9.4    9.5    9.6    9.7    9.8    9.9 
```

### 3.4.matrix arange(double beg,double en,int n,char layout='c')向量构造函数

构造以beg为起点，en为终点，n为份数的一维数组，并且默认是列向量；否则需要改layout='r'返回行向量；返回值为该matrix类

ex:
```C++
arange(0,10,100,'r')show();
```

输出结果：
```bash
     0    0.1    0.2    0.3    0.4    0.5    0.6    0.7    0.8    0.9      1    1.1    1.2    1.3    1.4    1.5    1.6    1.7    1.8    1.9      2    2.1    2.2    2.3    2.4    2.5    2.6    2.7    2.8    2.9      3    3.1    3.2    3.3    3.4    3.5    3.6    3.7    3.8    3.9      4    4.1    4.2    4.3    4.4    4.5    4.6    4.7    4.8    4.9      5    5.1    5.2    5.3    5.4    5.5    5.6    5.7    5.8    5.9      6    6.1    6.2    6.3    6.4    6.5    6.6    6.7    6.8    6.9      7    7.1    7.2    7.3    7.4    7.5    7.6    7.7    7.8    7.9      8    8.1    8.2    8.3    8.4    8.5    8.6    8.7    8.8    8.9      9    9.1    9.2    9.3    9.4    9.5    9.6    9.7    9.8    9.9 
```